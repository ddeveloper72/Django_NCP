{# MEDICATIONS SECTION - Customizable Template #}
{# Easy to modify layout, styling, and data presentation #}

{% if entries %}
    <!-- Layout Option 1: Card-based (default) -->
    <div class="medications-entries">
        {% for entry in entries %}
        <div class="clinical-entry" data-entry-type="medication">
            <!-- Primary Information Row -->
            <div class="row">
                <div class="col-md-7">
                    <div class="primary-info">
                        <span class="field-label">Medication Name:</span>
                        <div class="field-value fw-bold">{{ entry.medication_name|default:"Not specified" }}</div>
                    </div>
                </div>
                <div class="col-md-5 text-end">
                    {% if entry.dosage %}
                    <span class="badge bg-info">{{ entry.dosage }}</span>
                    {% endif %}
                    {% if entry.status %}
                    <span class="status-badge bg-{{ entry.status|lower|default:'secondary' }}">
                        {{ entry.status|default:"Active" }}
                    </span>
                    {% endif %}
                </div>
            </div>

            <!-- Secondary Information Row -->
            <div class="row mt-2">
                <div class="col-md-6">
                    <span class="field-label">Medication Code:</span>
                    <div class="field-value">
                        <code class="code-value">{{ entry.medication_code|default:"Not specified" }}</code>
                    </div>
                </div>
                {% if entry.active_ingredient %}
                <div class="col-md-6">
                    <span class="field-label">Active Ingredient:</span>
                    <div class="field-value">{{ entry.active_ingredient }}</div>
                </div>
                {% endif %}
            </div>

            <!-- Dosage and Frequency Information -->
            {% if entry.dosage_form or entry.frequency %}
            <div class="row mt-2">
                {% if entry.dosage_form %}
                <div class="col-md-6">
                    <span class="field-label">Form:</span>
                    <div class="field-value">{{ entry.dosage_form }}</div>
                </div>
                {% endif %}
                {% if entry.frequency %}
                <div class="col-md-6">
                    <span class="field-label">Frequency:</span>
                    <div class="field-value">{{ entry.frequency }}</div>
                </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- Additional Fields (Easy to add/remove) -->
            {% if entry.start_date or entry.end_date %}
            <div class="row mt-2">
                {% if entry.start_date %}
                <div class="col-md-6">
                    <span class="field-label">Start Date:</span>
                    <div class="field-value">{{ entry.start_date }}</div>
                </div>
                {% endif %}
                {% if entry.end_date %}
                <div class="col-md-6">
                    <span class="field-label">End Date:</span>
                    <div class="field-value">{{ entry.end_date }}</div>
                </div>
                {% endif %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <!-- Alternative Layout Option 2: Compact List (commented out - easy to switch) -->
    <!--
    <div class="medications-list">
        {% for entry in entries %}
        <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
            <div>
                <strong>{{ entry.medication_name|default:"Unknown Medication" }}</strong>
                <br>
                <small class="text-muted">
                    <code>{{ entry.medication_code|default:"No code" }}</code>
                    {% if entry.dosage %} | {{ entry.dosage }}{% endif %}
                </small>
            </div>
            <div>
                <span class="badge bg-info">{{ entry.status|default:"Active" }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
    -->

{% else %}
    <div class="text-muted text-center py-4">
        <i class="fa-solid fa-pills me-2"></i>
        No medications recorded for this patient.
    </div>
{% endif %}

<!-- Extended Patient Document Information Component -->
<div class="tab-pane fade {{ document_tab_active_class }}" id="document" role="tabpanel"
    aria-labelledby="document-tab">
    {% if administrative_data %}

    <!-- Debug Document Data -->
    <div class="alert alert-success mb-3">
        <h6>DEBUG: Administrative Data Available</h6>
        <p><strong>Authors Count:</strong>
            {{ administrative_data.get('authors', []) | length }}</p>
        <p><strong>Custodians Count:</strong>
            {{ administrative_data.get('custodians', []) | length }}</p>
    </div>

    <!-- Document Status -->
    <div class="row mb-3">
        <div class="col-md-12">
            <h6><i class="fas fa-info-circle me-1"></i>CDA Document Status</h6>
            <div class="contact-info-card">
                <div class="contact-details">
                    <span class="badge bg-success me-2"><i class="fas fa-check me-1"></i>Active</span>
                    <span class="badge bg-info me-2"><i class="fas fa-lock me-1"></i>Secure</span>
                    <span class="badge bg-secondary"><i class="fas fa-eye me-1"></i>Normal Confidentiality</span>
                    <br><small class="text-muted mt-2 d-block">Document confidentialityCode and status
                        indicators</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Document Custodians -->
    {% if administrative_data.get('custodians') %}
    <div class="row mb-3">
        <div class="col-md-12">
            <h6><i class="fas fa-shield-alt me-1"></i>Document Custodians</h6>
            {% for custodian in administrative_data.custodians %}
            <div class="contact-info-card">
                <div class="contact-type">Custodian Organization</div>
                <div class="contact-details">
                    <strong>
                        {{ custodian.get('organization', {}).get('name', 'Unknown Organization') }}</strong>
                    {% if custodian.get('organization', {}).get('id') %}
                    <br><small class="text-muted">ID:
                        {{ custodian.organization.id }}</small>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Document Authors -->
    {% if administrative_data.get('authors') %}
    <div class="row mb-3">
        <div class="col-md-12">
            <h6><i class="fas fa-user-md me-1"></i>Document Authors</h6>
            {% for author in administrative_data.authors %}
            <div class="contact-info-card">
                <div class="contact-type">Document Author</div>
                <div class="contact-details">
                    <strong>
                        {{ author.get('family_name', 'Unknown') }}</strong>
                    {% if author.get('given_name') %},
                    {{ author.given_name }}
                    {% endif %}
                    {% if author.get('time') %}
                    <br><small class="text-muted">Author Time:
                        {{ author.time }}</small>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Document Metadata -->
    <div class="row mb-3">
        <div class="col-md-12">
            <h6><i class="fas fa-file-alt me-1"></i>Document Metadata</h6>
            <div class="contact-info-card">
                <div class="contact-details">
                    <strong>Document ID:</strong> Available from CDA header<br>
                    <strong>Creation Time:</strong> Extracted from effectiveTime<br>
                    <strong>Language:</strong> en-GB<br>
                    <strong>Version:</strong> 1.0<br>
                    <strong>Status:</strong> Active
                </div>
            </div>
        </div>
    </div>

    <!-- Show message if no document info -->
    {% if not administrative_data.get('authors') and not administrative_data.get('custodians') %}
    <div class="alert alert-info">
        <i class="fas fa-info-circle me-2"></i>Limited document information available.
    </div>
    {% endif %}

    {% else %}
    <div class="alert alert-warning">
        <i class="fas fa-exclamation-triangle me-2"></i>No administrative data available.
    </div>
    {% endif %}
</div>
<!-- End tab-pane -->

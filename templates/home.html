{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django EU eHealth NCP Server</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>
<body class="home-page">
    <div class="header">
        <h1>üè• Django EU eHealth NCP Server</h1>
        <p>European eHealth Cross-Border Patient Portal</p>
    </div>

    <div class="container">
        <h2 class="text-center text-primary mb-xl">Choose Your Integration Approach</h2>

        <!-- SMP Source Information -->
        <div class="status-indicator mb-xl">
            <p><strong>Active SMP Source:</strong> {{ current_smp_name }}</p>
            <p class="mt-sm text-sm opacity-80">
                Portal: <a href="{{ current_smp_ui_url }}" target="_blank" rel="noopener" class="text-primary">{{ current_smp_ui_url }}</a>
            </p>
            <p class="text-xs italic">SMP source configuration is managed by administrators only.</p>
        </div>

        <!-- Integration Options Grid -->
        <div class="integration-options">
            <div class="option-card">
                <h3>üîç Patient Search</h3>
                <p>Search for patients across EU member states with break-the-glass emergency access capabilities. GDPR-compliant cross-border patient data retrieval.</p>
                <a href="/patients/search/" class="option-link">Search Patients</a>
            </div>

            <div class="option-card">
                <h3>üñ•Ô∏è Django Portal UI</h3>
                <p>Full eHealth portal with European SMP integration, country-specific International Search Masks (ISM), and cross-border patient lookup capabilities.</p>
                <a href="/portal/" class="option-link">Launch Portal</a>
            </div>

            <div class="option-card">
                <h3>‚öôÔ∏è Django Admin</h3>
                <p>Administrative interface for managing countries, ISM configurations, certificates, and monitoring European SMP connectivity status.</p>
                <a href="/admin/" class="option-link">Admin Panel</a>
            </div>

            <div class="option-card">
                <h3>üîó API Endpoints</h3>
                <p>REST API for Java portal integration with dynamic country data, patient lookup services, and document retrieval endpoints.</p>
                <a href="/api/countries/" class="option-link">View API</a>
            </div>
        </div>

        <!-- API Section -->
        <div class="api-section">
            <h3>üåê Available API Endpoints</h3>
            <div class="api-list">
                <div class="api-item">
                    <strong>GET</strong> <a href="/api/countries/">/api/countries/</a><br>
                    <small>Get available EU countries with ISM support</small>
                </div>
                <div class="api-item">
                    <strong>POST</strong> /api/patient/lookup/<br>
                    <small>Cross-border patient lookup with country-specific validation</small>
                </div>
                <div class="api-item">
                    <strong>GET</strong> /api/patient/{patient_id}/document/{type}/<br>
                    <small>Retrieve patient documents from European health systems</small>
                </div>
            </div>
        </div>

        <!-- External Services -->
        <div class="external-services">
            <h3>üîó External Service Connections</h3>
            <div class="service-grid">
                <div class="service-item">
                    <h4>Java OpenNCP Portal</h4>
                    <p>Original Java-based portal</p>
                    <a href="http://localhost:8093" target="_blank" rel="noopener">localhost:8093</a>
                </div>
                <div class="service-item">
                    <h4>DomiSMP Server</h4>
                    <p>Service Metadata Publisher</p>
                    <a href="{{ current_smp_ui_url }}" target="_blank" rel="noopener">{{ current_smp_ui_url }}</a>
                </div>
            </div>
        </div>

        <div class="status-indicator">
            <p>‚úÖ All API endpoints are accessible without authentication for Java portal integration</p>
        </div>
    </div>
</body>
</html>

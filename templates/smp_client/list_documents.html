{% extends "base.html" %}
{% load static %}

{% block title %}SMP Documents{% endblock %}

{% block page_context %}
<!-- Breadcrumb Navigation -->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="{% url 'index' %}" class="breadcrumb-link">
                <i class="fa fa-home" aria-hidden="true"></i> Home
            </a>
        </li>
        <li class="breadcrumb-item">
            <a href="{% url 'smp_client:dashboard' %}" class="breadcrumb-link">
                <i class="fa fa-link" aria-hidden="true"></i> SMP Management
            </a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
            <i class="fa fa-file-text" aria-hidden="true"></i> Documents
        </li>
    </ol>
</nav>
{% endblock %}

{% block content %}
<div class="dashboard-page">
    <!-- Page Header -->
    <div class="page-header">
        <h1><i class="fa fa-file-text" aria-hidden="true"></i> SMP Documents</h1>
        <p class="page-subtitle">Service Metadata Publisher Document Management</p>
    </div>

    <div class="container">
        <!-- Search and Filter Section -->
        <div class="content-section">
            <div class="section-header">
                <h2 class="section-title">Document Search</h2>
                <div class="section-actions">
                    <a href="{% url 'smp_client:smp_editor' %}" class="btn btn-primary">
                        <i class="fa fa-plus" aria-hidden="true"></i> Add New Document
                    </a>
                </div>
            </div>

            <div class="search-form">
                <div class="search-group">
                    <input type="text" id="document-search" placeholder="Search documents..." class="form-control">
                    <button type="button" class="btn btn-secondary"><i class="fa fa-search" aria-hidden="true"></i> Search</button>
                </div>
            </div>
        </div>

        <!-- Documents List -->
        <div class="content-section">
            <h2 class="section-title">Available Documents</h2>

            {% if documents %}
            <div class="documents-grid">
                {% for document in documents %}
                <div class="document-card">
                    <div class="document-header">
                        <h3 class="document-title">{{ document.name|default:"Unnamed Document" }}</h3>
                        <div class="document-status {{ document.status|lower }}">
                            {{ document.status|default:"Active" }}
                        </div>
                    </div>
                    <div class="document-meta">
                        <div class="meta-item">
                            <span class="meta-label">Service ID:</span>
                            <span class="meta-value">{{ document.service_id|default:"N/A" }}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Process ID:</span>
                            <span class="meta-value">{{ document.process_id|default:"N/A" }}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Last Updated:</span>
                            <span class="meta-value">{{ document.last_updated|default:"Unknown" }}</span>
                        </div>
                    </div>
                    <div class="document-actions">
                        <a href="{% url 'smp_client:document_detail' document.id %}"
                            class="btn btn-sm btn-outline-primary">
                            <i class="fa fa-eye" aria-hidden="true"></i> View
                        </a>
                        <a href="{% url 'smp_client:document_edit' document.id %}"
                            class="btn btn-sm btn-outline-secondary">
                            <i class="fa fa-edit" aria-hidden="true"></i> Edit
                        </a>
                        <button data-delete-document="{{ document.id }}"
                                data-delete-url="{% url 'smp_client:document_delete' '0' %}"
                                class="btn btn-sm btn-outline-danger">
                            <i class="fa fa-trash" aria-hidden="true"></i> Delete
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <div class="empty-icon"><i class="fa fa-file-text" aria-hidden="true"></i></div>
                <h3>No Documents Found</h3>
                <p>There are no SMP documents configured yet. Start by adding your first document.</p>
                <a href="{% url 'smp_client:smp_editor' %}" class="btn btn-primary">
                    <i class="fa fa-plus" aria-hidden="true"></i> Add First Document
                </a>
            </div>
            {% endif %}
        </div>

        <!-- Quick Actions -->
        <div class="content-section">
            <h2 class="section-title">Quick Actions</h2>
            <div class="actions-grid">
                <div class="action-card">
                    <div class="action-icon"><i class="fa fa-file-text" aria-hidden="true"></i></div>
                    <h3>Create Document</h3>
                    <p>Add a new SMP document configuration.</p>
                    <a href="{% url 'smp_client:smp_editor' %}" class="btn btn-primary">Create</a>
                </div>
                <div class="action-card">
                    <div class="action-icon"><i class="fa fa-folder" aria-hidden="true"></i></div>
                    <h3>Import Documents</h3>
                    <p>Import documents from XML files.</p>
                    <button class="btn btn-secondary">Import</button>
                </div>
                <div class="action-card">
                    <div class="action-icon"><i class="fa fa-upload" aria-hidden="true"></i></div>
                    <h3>Export All</h3>
                    <p>Export all documents to XML format.</p>
                    <button class="btn btn-secondary">Export</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Document list functionality is now externalized -->
<script src="{% static 'js/document_list.js' %}"></script>
{% endblock %}
